<html>
    <head>
        <script
            type="text/javascript"
            src="../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php
/**
 * @package phpunk\component
 */

class model_base {
	private $_resource;
	private $_database;
	private $_cache;

	public function __construct($resource, $database, $cache = null) {
		$this-&gt;_resource = $resource;
		$this-&gt;_database = $database;
		$this-&gt;_cache    = $cache;
	}

	public function __get($key) {
		switch ($key) {
			case 'resource':
				return $this-&gt;_resource;
			case 'insert_id':
				return $this-&gt;_database-&gt;insert_id;
		}
	}

	public function get_record($id) {
		if ($record = $this-&gt;get_cached_object($id))
			return $record;

		if ($record = $this-&gt;_database-&gt;get_record($this-&gt;_resource, $id))
			$this-&gt;put_cached_object($id, $record);

		return $record;
	}

	public function put_record($record) {
		if ($record = $this-&gt;_database-&gt;put_record($this-&gt;_resource, $record))
			$this-&gt;put_cached_object($record-&gt;id, $record);

		return $record;
	}

	public function remove_record($id) {
		if ($result = $this-&gt;_database-&gt;remove_record($this-&gt;_resource, $id))
			$this-&gt;remove_cached_object($id);

		return $result;
	}

	protected function query($sql, $params = array()) {
		$params = is_array($params) ? $params : array_slice(func_get_args(), 1);
		return $this-&gt;_database-&gt;query($sql, $params);
	}

	protected function execute($sql, $params = array()) {
		$params = is_array($params) ? $params : array_slice(func_get_args(), 1);
		return $this-&gt;_database-&gt;execute($sql, $params);
	}

	protected function make_query($args) {
		$args['table'] = $this-&gt;_resource;
		return new database_query($this-&gt;_database, $args);
	}

	protected function get_cached_object($id) {
		return @$this-&gt;_cache-&gt;get($this-&gt;_resource, $id);
	}

	protected function put_cached_object($id, $object) {
		return @$this-&gt;_cache-&gt;put($this-&gt;_resource, $id, $object);
	}

	protected function remove_cached_object($id) {
		return @$this-&gt;_cache-&gt;remove($this-&gt;_resource, $id);
	}
}
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>