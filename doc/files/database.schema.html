<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>API Documentation</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/jquery.tools.min.js"></script><script type="text/javascript" src="../js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div id="content"><h1 class="file">database/schema.php<a href="../source/database/schema.php.html"><img src="../images/icons/view_source.png" alt="View Source" border="0"></img></a></h1><div id="file-nav-box"><div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" alt="Public" id="show-public"></img><img src="../images/icons/visibility_protected.png" alt="Protected" id="show-protected"></img><img src="../images/icons/visibility_private.png" alt="Private" id="show-private"></img><span class="attribute" id="show-inherited">inherited</span></div><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\PHPunk\Database\schema">\PHPunk\Database\schema</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div xmlns:php="http://php.net/xsl" class="long-description"></div></div><dl class="file-info"><dt xmlns:php="http://php.net/xsl">Package</dt><dd xmlns:php="http://php.net/xsl">phpunk\database
         
    </dd></dl><a name="classes" class="anchor"></a><a id="\PHPunk\Database\schema" class="anchor"></a><h2 class="class">\PHPunk\Database\schema<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><div class="description"></div><small class="package"><b>Package: </b>phpunk\database</small><div xmlns:php="http://php.net/xsl" class="long-description"></div><dl class="class-info"></dl><h3>Properties</h3><div><a id="\PHPunk\Database\schema::$insert_id" class="anchor"></a><div class="property public magic "><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img>mixed <span class="highlight">$insert_id</span></code><div class="description"><div xmlns:php="http://php.net/xsl" class="short-description">Most recent auto-generated unique ID from MySQL</div></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>mixed</dd><dt xmlns:php="http://php.net/xsl">Magic</dt><dd xmlns:php="http://php.net/xsl">
         
    </dd><dt xmlns:php="http://php.net/xsl">Property</dt><dd xmlns:php="http://php.net/xsl">Most recent auto-generated unique ID from MySQL
         
    </dd></dl></div><div class="clear"></div></div></div><h3>Methods</h3><div><a id="\PHPunk\Database\schema::__construct()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__construct</span><span class="nb-faded-text">(object $mysql)</span> : void</code><div class="description"><p class="short_description"></p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$mysql</th><td>object</td><td><em><p>A previously-established MySQLi instance</p></em></td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::add_relation()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">add_relation</span><span class="nb-faded-text">(string $rel_name, string $ptable_name, string $ftable_name, string $fkey)</span> : object</code><div class="description"><p class="short_description">Defines a relationship in the schema. If the relationship already exists
in the schema, this method will merely return the defined relation object.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$rel_name</th><td>string</td><td><em><p>Relationship name</p></em></td></tr><tr><th>$ptable_name</th><td>string</td><td><em><p>Name of table containing primary key</p></em></td></tr><tr><th>$ftable_name</th><td>string</td><td><em><p>Name of table containing foreign key</p></em></td></tr><tr><th>$fkey</th><td>string</td><td><em><p>Name of foreign key field</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>Newly-defined relation object</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::add_table()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">add_table</span><span class="nb-faded-text">(string $name, string $pkey = 'id')</span> : object</code><div class="description"><p class="short_description">Defines a database table name in schema. If the table name already exists
in the schema, this method will merely return the defined table object.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>Table name</p></em></td></tr><tr><th>$pkey</th><td>string</td><td><em><p>OPTIONAL Primary key field, defaults to 'id'</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>Newly-defined table object</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::clear_relations()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">clear_relations</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Removes all database relationship definitions from schema.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::clear_tables()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">clear_tables</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Removes all database table definitions from schema.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::execute()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">execute</span><span class="nb-faded-text">(string $sql, array $params = array())</span> : boolean</code><div class="description"><p class="short_description">Executes a parameterized INSERT, UPDATE, or DELETE query.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$sql</th><td>string</td><td><em><p>A standard SQL query string</p></em></td></tr><tr><th>$params</th><td>array</td><td><em><p>OPTIONAL Index-based query parameters</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td>TRUE on sucess, FALSE on failure</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::get_record()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">get_record</span><span class="nb-faded-text">(string $table_name, mixed $record_id, string $rel_name = false)</span> : object</code><div class="description"><p class="short_description">Return database record by unique identifier. If the relationship argument
is used, the identifier will be interpreted as the foreign record's
primary key. Otherwise, the identifier will be interpreted as the record's
own primary key.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$table_name</th><td>string</td><td><em><p>Table name</p></em></td></tr><tr><th>$record_id</th><td>mixed</td><td><em><p>Unique identifier for database record</p></em></td></tr><tr><th>$rel_name</th><td>string</td><td><em><p>OPTIONAL Relationship name</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>Record identified by parameter, NULL on failure</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::get_relation()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">get_relation</span><span class="nb-faded-text">(string $name)</span> : object</code><div class="description"><p class="short_description">Returns the foreign-key relationship object with the given name.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>The name of the relationship</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>Relation object if the relationship is defined, FALSE otherwise</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::get_table()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">get_table</span><span class="nb-faded-text">(string $name)</span> : object</code><div class="description"><p class="short_description">Returns the database table object with the given name.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>The name of the database table</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>Table object if the table name is defined, or FALSE otherwise</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::put_record()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">put_record</span><span class="nb-faded-text">(string $table_name, mixed $record)</span> : mixed</code><div class="description"><p class="short_description">Inserts or updates a database record and returns the record's primary key.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$table_name</th><td>string</td><td><em><p>Table name</p></em></td></tr><tr><th>$record</th><td>mixed</td><td><em><p>Key-value data for database record</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>Record's primary key</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::query()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">query</span><span class="nb-faded-text">(string $sql, array $params = array(), string $table_name = false)</span> : object</code><div class="description"><p class="short_description">Executes a parameterized SELECT query.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$sql</th><td>string</td><td><em><p>A standard SQL query string</p></em></td></tr><tr><th>$params</th><td>array</td><td><em><p>OPTIONAL Index-based query parameters</p></em></td></tr><tr><th>$table_name</th><td>string</td><td><em><p>OPTIONAL Table name to be passed on to result</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>Database result object, FALSE on failure</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::relation_exists()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">relation_exists</span><span class="nb-faded-text">(string $name)</span> : boolean</code><div class="description"><p class="short_description">Returns whether a foreign-key relationship with the given name has been
defined in the database schema.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>The name of the relationship</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td>TRUE if the relationship is defined, FALSE otherwise</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::remove_record()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">remove_record</span><span class="nb-faded-text">(string $table_name, mixed $record_id)</span> : boolean</code><div class="description"><p class="short_description">Deletes a database record by primary key.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$table_name</th><td>string</td><td><em><p>Table name</p></em></td></tr><tr><th>$record_id</th><td>mixed</td><td><em><p>Record's primary key</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td>TRUE on success, False on failure</td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::remove_relation()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">remove_relation</span><span class="nb-faded-text">(string $name)</span> : void</code><div class="description"><p class="short_description">Removes a relationship definition from the schema.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>Relationship name</p></em></td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::remove_table()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">remove_table</span><span class="nb-faded-text">(string $name)</span> : void</code><div class="description"><p class="short_description">Removes a database table definition from the schema.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>Table name</p></em></td></tr></table></div><div class="clear"></div></div><a id="\PHPunk\Database\schema::table_exists()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">table_exists</span><span class="nb-faded-text">(string $name)</span> : boolean</code><div class="description"><p class="short_description">Returns whether a table with the given name has been defined in the database schema.</p></div><div class="code-tabs"><div xmlns:php="http://php.net/xsl" class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>The name of the database table</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td>TRUE if the table name is defined, or FALSE otherwise</td></tr></table></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.8.5</a>.
        </small></body></html>
